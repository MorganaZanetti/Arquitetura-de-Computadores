	ORG 0000H
	LJMP INICIO
	ORG 0100H

INICIO:
	MOV P1, #10111111B ;Se o botão 0 não for pressionado
	JNB P2.0, BOTAO_PRESSIONADO
	JMP INICIO ;Retorna a função enquanto nenhum botão for pressionado


BOTAO_PRESSIONADO:
	JNB P2.0, LIGADO
	JB P2.0, DESLIGADO
	RET ;Retorna à função anterior


LIGADO:
	MOV P1, #11011111B ;Liga o LED verde
	ACALL DELAY
	JNB P2.0, DESLIGADO
	JNB P2.6 , COLOCA_CAPSULA
	JMP LIGADO

DESLIGADO:
	MOV P1, #10111111B ;Liga o LED vermelho
	JMP DESLIGADO


DELAY: 

NEXT:
	MOV R5, #255
AGAIN:
	DJNZ R5, AGAIN
	RET


COLOCA_CAPSULA:
	MOV R0, #1
	JNB P2.7, AUMENTAR_AGUA
	JMP COLOCA_CAPSULA

CONFERE_AGUA:
	JNB P2.7, AUMENTAR_AGUA
	JMP CONFERE_AGUA

AUMENTAR_AGUA:
	INC R7
	ACALL CONFERE_AGUA


TEMPERATURA:
	JNB P2.1, BOTAO_FRIO
	JNB P2.2, BOTAO_MORNO
	JNB P2.3, BOTAO_QUENTE
	JMP TEMPERATURA ;Continua na função TEMPERATURA até pressionar algum botão
	

PREPARA_BEBIDA:
	MOV P1, #01111111B ;Liga o LED amarelo
	ACALL DELAY
	MOV P1, #11011111B ;Liga o LED verde


;BOTÃO PARA LIGAR E DESLIGAR A MÁQUINA
BOTAO_LIGA_DESLIGA:
	ACALL BOTAO_PRESSIONADO


;BOTÕES DE TEMPERATURA
BOTAO_FRIO:	
	JB P2.1, PREPARA_BEBIDA ;Define o botão 1 como frio
	JMP BOTAO_FRIO

BOTAO_MORNO:
	JB P2.2, PREPARA_BEBIDA ;Define o botão 2 como morno


BOTAO_QUENTE:
	JB P2.3, PREPARA_BEBIDA ;Define o botão 3 como quente
